<!DOCTYPE html>
<html>
<head>
    <title>Teacher Dashboard | SABA</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body { background:#f1f5f9; }

        .sidebar {
            height:100vh;
            background:#1e293b;
            color:white;
            padding:20px;
        }

        .sidebar a {
            display:block;
            color:#cbd5e1;
            padding:12px 0;
            text-decoration:none;
        }

        .sidebar a:hover { color:white; }

        .card-box {
            border-radius:12px;
            padding:20px;
            color:white;
        }

        .bg-total { background:#6366f1; }
        .bg-risk { background:#ef4444; }
        .bg-good { background:#10b981; }
        .bg-average { background:#f59e0b; }

        .table-box {
            background:white;
            padding:20px;
            border-radius:12px;
            margin-top:20px;
        }
    </style>
</head>
<body>

<div class="container-fluid">
    <div class="row">

        <div class="col-md-2 sidebar">
            <h4>SABA System</h4>
            <hr>
            <a href="/teacher">Dashboard</a>
            <a href="/">Logout</a>
        </div>

        <div class="col-md-10 p-4">

            <div class="d-flex justify-content-between align-items-center mb-4">
                <h4>Teacher Dashboard</h4>
                <a href="/add_performance" class="btn btn-primary btn-sm">
                    + Add Student
                </a>
            </div>

            <!-- Analysis Cards -->
            <div class="row">

                <div class="col-md-3">
                    <div class="card-box bg-total text-center">
                        <h6>Total Students</h6>
                        <h2>{{ total_students }}</h2>
                    </div>
                </div>

                <div class="col-md-3">
                    <div class="card-box bg-risk text-center">
                        <h6>At Risk</h6>
                        <h2>{{ at_risk }}</h2>
                    </div>
                </div>

                <div class="col-md-3">
                    <div class="card-box bg-good text-center">
                        <h6>Good</h6>
                        <h2>{{ good }}</h2>
                    </div>
                </div>

                <div class="col-md-3">
                    <div class="card-box bg-average text-center">
                        <h6>Average</h6>
                        <h2>{{ average }}</h2>
                    </div>
                </div>

            </div>

            <!-- Student Table -->
            <div class="table-box">
                <h5>Student List</h5>

                <table class="table table-hover mt-3">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Department</th>
                            <th>Attendance</th>
                            <th>Marks</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for s in students %}
                        <tr>
                            <td>{{ s[1] }}</td>
                            <td>{{ s[3] }}</td>
                            <td>{{ s[4] }}%</td>
                            <td>{{ s[5] }}</td>
                            <td>
                                {% if s[4] < 60 or s[5] < 40 %}
                                    <span class="badge bg-danger">At Risk</span>
                                {% elif s[5] >= 75 %}
                                    <span class="badge bg-success">Good</span>
                                {% else %}
                                    <span class="badge bg-warning text-dark">Average</span>
                                {% endif %}
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>

            </div>

        </div>
    </div>
</div>

</body>
</html>